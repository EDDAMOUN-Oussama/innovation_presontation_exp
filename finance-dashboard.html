<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Personal Finance Dashboard</title>
    <!-- Tailwind CSS via CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Chart.js via CDN -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap');
        
        body {
            font-family: 'Inter', sans-serif;
            background-color: #0f172a;
            color: #e2e8f0;
        }
        
        .dark-bg {
            background-color: #0f172a;
        }
        
        .card {
            background-color: #1e293b;
            border-radius: 12px;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.3);
        }
        
        .btn-primary {
            background: linear-gradient(135deg, #6366f1, #8b5cf6);
            transition: all 0.3s ease;
        }
        
        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(99, 102, 241, 0.4);
        }
        
        .input-field {
            background-color: #334155;
            border: 1px solid #475569;
            color: #e2e8f0;
        }
        
        .input-field:focus {
            outline: none;
            border-color: #6366f1;
            box-shadow: 0 0 0 3px rgba(99, 102, 241, 0.2);
        }
        
        .transaction-item {
            border-bottom: 1px solid #334155;
        }
        
        .transaction-item:last-child {
            border-bottom: none;
        }
        
        .category-tag {
            padding: 2px 8px;
            border-radius: 20px;
            font-size: 0.75rem;
            font-weight: 500;
        }
    </style>
</head>
<body class="dark-bg min-h-screen">
    <div class="container mx-auto px-4 py-8">
        <header class="mb-10 text-center">
            <h1 class="text-4xl font-bold mb-2 bg-gradient-to-r from-indigo-400 to-purple-400 bg-clip-text text-transparent">Personal Finance Dashboard</h1>
            <p class="text-slate-400">Track and visualize your expenses</p>
        </header>

        <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
            <!-- Left Column: Form and Recent Transactions -->
            <div class="space-y-8">
                <!-- Add Expense Form -->
                <div class="card p-6">
                    <h2 class="text-xl font-semibold mb-4 text-white">Add New Expense</h2>
                    <form id="expense-form" class="space-y-4">
                        <div>
                            <label for="amount" class="block text-sm font-medium text-slate-300 mb-1">Amount ($)</label>
                            <input type="number" id="amount" name="amount" step="0.01" min="0" required class="w-full input-field rounded-lg px-4 py-2 focus:ring-2 focus:ring-indigo-500">
                        </div>
                        
                        <div>
                            <label for="category" class="block text-sm font-medium text-slate-300 mb-1">Category</label>
                            <select id="category" name="category" required class="w-full input-field rounded-lg px-4 py-2 focus:ring-2 focus:ring-indigo-500">
                                <option value="">Select a category</option>
                                <option value="Food">Food</option>
                                <option value="Transportation">Transportation</option>
                                <option value="Entertainment">Entertainment</option>
                                <option value="Utilities">Utilities</option>
                                <option value="Shopping">Shopping</option>
                                <option value="Healthcare">Healthcare</option>
                                <option value="Travel">Travel</option>
                                <option value="Other">Other</option>
                            </select>
                        </div>
                        
                        <div>
                            <label for="date" class="block text-sm font-medium text-slate-300 mb-1">Date</label>
                            <input type="date" id="date" name="date" required class="w-full input-field rounded-lg px-4 py-2 focus:ring-2 focus:ring-indigo-500">
                        </div>
                        
                        <button type="submit" class="w-full btn-primary text-white font-medium py-3 rounded-lg mt-4">Add Expense</button>
                    </form>
                </div>

                <!-- Recent Transactions -->
                <div class="card p-6">
                    <div class="flex justify-between items-center mb-4">
                        <h2 class="text-xl font-semibold text-white">Recent Transactions</h2>
                        <button id="clear-transactions" class="text-red-400 hover:text-red-300 text-sm">Clear All</button>
                    </div>
                    <div id="transactions-list" class="space-y-3 max-h-96 overflow-y-auto pr-2">
                        <!-- Transactions will be populated here -->
                        <div class="text-center text-slate-500 py-8" id="no-transactions-message">No transactions yet. Add your first expense!</div>
                    </div>
                </div>
            </div>

            <!-- Right Column: Chart -->
            <div class="card p-6">
                <h2 class="text-xl font-semibold mb-4 text-white">Expenses by Category</h2>
                <div class="chart-container">
                    <canvas id="expense-chart"></canvas>
                </div>
                <div class="mt-6">
                    <h3 class="font-medium text-slate-300 mb-2">Summary</h3>
                    <div class="flex justify-between">
                        <div class="bg-slate-800 rounded-lg p-4 flex-1 mr-2">
                            <p class="text-slate-400 text-sm">Total Expenses</p>
                            <p class="text-2xl font-bold text-white" id="total-expenses">$0.00</p>
                        </div>
                        <div class="bg-slate-800 rounded-lg p-4 flex-1 ml-2">
                            <p class="text-slate-400 text-sm">Transactions</p>
                            <p class="text-2xl font-bold text-white" id="transaction-count">0</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Initialize application
        document.addEventListener('DOMContentLoaded', function() {
            // Set today's date as default
            const today = new Date().toISOString().split('T')[0];
            document.getElementById('date').value = today;

            // Load transactions from localStorage
            loadTransactions();

            // Setup form submission
            document.getElementById('expense-form').addEventListener('submit', addExpense);

            // Setup clear button
            document.getElementById('clear-transactions').addEventListener('click', clearAllTransactions);
        });

        // Color palette for categories
        const categoryColors = {
            'Food': '#F59E0B',
            'Transportation': '#EF4444',
            'Entertainment': '#10B981',
            'Utilities': '#3B82F6',
            'Shopping': '#8B5CF6',
            'Healthcare': '#EC4899',
            'Travel': '#06B6D4',
            'Other': '#64748B'
        };

        // Function to add new expense
        function addExpense(e) {
            e.preventDefault();
            
            const amount = parseFloat(document.getElementById('amount').value);
            const category = document.getElementById('category').value;
            const date = document.getElementById('date').value;
            
            if (isNaN(amount) || !category || !date) {
                alert('Please fill in all fields correctly');
                return;
            }

            const transaction = {
                id: Date.now(),
                amount,
                category,
                date,
                timestamp: new Date().toISOString()
            };

            // Save to localStorage
            saveTransaction(transaction);

            // Update UI
            renderTransaction(transaction);
            updateChart();
            updateSummary();

            // Reset form
            document.getElementById('expense-form').reset();
            document.getElementById('date').value = new Date().toISOString().split('T')[0];
        }

        // Function to save transaction to localStorage
        function saveTransaction(transaction) {
            let transactions = JSON.parse(localStorage.getItem('transactions')) || [];
            transactions.push(transaction);
            localStorage.setItem('transactions', JSON.stringify(transactions));
        }

        // Function to load transactions from localStorage
        function loadTransactions() {
            const transactions = JSON.parse(localStorage.getItem('transactions')) || [];
            
            // Clear current list
            document.getElementById('transactions-list').innerHTML = '';
            
            if (transactions.length === 0) {
                document.getElementById('no-transactions-message').style.display = 'block';
                return;
            }
            
            document.getElementById('no-transactions-message').style.display = 'none';
            
            // Sort by date (newest first)
            transactions.sort((a, b) => new Date(b.timestamp) - new Date(a.timestamp));
            
            // Render each transaction
            transactions.forEach(transaction => {
                renderTransaction(transaction);
            });
            
            updateChart();
            updateSummary();
        }

        // Function to render a transaction item
        function renderTransaction(transaction) {
            const transactionsList = document.getElementById('transactions-list');
            const noTransactionsMessage = document.getElementById('no-transactions-message');
            
            // Hide "no transactions" message if needed
            if (noTransactionsMessage.style.display !== 'none') {
                noTransactionsMessage.style.display = 'none';
            }
            
            const dateObj = new Date(transaction.date);
            const formattedDate = dateObj.toLocaleDateString('en-US', { 
                year: 'numeric', 
                month: 'short', 
                day: 'numeric' 
            });
            
            const transactionElement = document.createElement('div');
            transactionElement.className = 'transaction-item flex justify-between items-center py-3';
            transactionElement.innerHTML = `
                <div class="flex items-center">
                    <div class="mr-3 w-3 h-3 rounded-full" style="background-color: ${categoryColors[transaction.category]}"></div>
                    <div>
                        <p class="font-medium text-white">${transaction.category}</p>
                        <p class="text-xs text-slate-400">${formattedDate}</p>
                    </div>
                </div>
                <div class="text-right">
                    <p class="font-medium text-white">$${transaction.amount.toFixed(2)}</p>
                    <button class="remove-btn text-red-400 hover:text-red-300 text-xs" data-id="${transaction.id}">Remove</button>
                </div>
            `;
            
            transactionsList.prepend(transactionElement);
            
            // Add event listener to remove button
            transactionElement.querySelector('.remove-btn').addEventListener('click', function() {
                removeTransaction(transaction.id);
            });
        }

        // Function to remove a transaction
        function removeTransaction(id) {
            let transactions = JSON.parse(localStorage.getItem('transactions')) || [];
            transactions = transactions.filter(t => t.id !== id);
            localStorage.setItem('transactions', JSON.stringify(transactions));
            
            loadTransactions();
        }

        // Function to clear all transactions
        function clearAllTransactions() {
            if (confirm('Are you sure you want to delete all transactions?')) {
                localStorage.removeItem('transactions');
                loadTransactions();
            }
        }

        // Initialize Chart
        let expenseChart = null;

        // Function to update the chart
        function updateChart() {
            const transactions = JSON.parse(localStorage.getItem('transactions')) || [];
            
            // Calculate totals by category
            const categoryTotals = {};
            transactions.forEach(transaction => {
                if (categoryTotals[transaction.category]) {
                    categoryTotals[transaction.category] += transaction.amount;
                } else {
                    categoryTotals[transaction.category] = transaction.amount;
                }
            });
            
            // Prepare data for chart
            const labels = Object.keys(categoryTotals);
            const data = Object.values(categoryTotals);
            const backgroundColors = labels.map(category => categoryColors[category]);
            
            // Get the canvas element
            const ctx = document.getElementById('expense-chart').getContext('2d');
            
            // Destroy existing chart if it exists
            if (expenseChart) {
                expenseChart.destroy();
            }
            
            // Create new chart
            expenseChart = new Chart(ctx, {
                type: 'pie',
                data: {
                    labels: labels,
                    datasets: [{
                        data: data,
                        backgroundColor: backgroundColors,
                        borderColor: '#1e293b',
                        borderWidth: 2
                    }]
                },
                options: {
                    responsive: true,
                    plugins: {
                        legend: {
                            position: 'bottom',
                            labels: {
                                color: '#cbd5e1',
                                padding: 15,
                                usePointStyle: true,
                                pointStyle: 'circle'
                            }
                        },
                        tooltip: {
                            callbacks: {
                                label: function(context) {
                                    const label = context.label || '';
                                    const value = context.parsed || 0;
                                    const total = context.dataset.data.reduce((a, b) => a + b, 0);
                                    const percentage = ((value / total) * 100).toFixed(1);
                                    return `${label}: $${value.toFixed(2)} (${percentage}%)`;
                                }
                            }
                        }
                    }
                }
            });
        }

        // Function to update summary
        function updateSummary() {
            const transactions = JSON.parse(localStorage.getItem('transactions')) || [];
            
            const totalExpenses = transactions.reduce((sum, transaction) => sum + transaction.amount, 0);
            document.getElementById('total-expenses').textContent = `$${totalExpenses.toFixed(2)}`;
            
            document.getElementById('transaction-count').textContent = transactions.length;
        }
    </script>
</body>
</html>